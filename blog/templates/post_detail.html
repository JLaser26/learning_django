{% extends 'base.html' %}

{% block content %}

<div class="card">
    <h1>{{ post.title }}</h1>

    <p>{{ post.content }}</p>

    <p>
        <strong>Author:</strong>
        <a href="/user/{{ post.author.username }}/">
            {{ post.author.username }}
        </a>
    </p>

    <p><small>{{ post.created_at }}</small></p>

    {% if user == post.author %}
        <a href="/edit/{{ post.id }}/">Edit</a> |
        <a href="/delete/{{ post.id }}/">Delete</a>
    {% endif %}
</div>

<hr>

<h2>Comments</h2>

{% for comment in comments %}
    <div class="card">
        <p>{{ comment.content }}</p>
        <p>
            <small>
                By 
                <a href="/user/{{ comment.author.username }}/">
                    {{ comment.author.username }}
                </a>
                | {{ comment.created_at }}
            </small>
        </p>
    </div>
{% empty %}
    <p>No comments yet.</p>
{% endfor %}

<hr>

{% if user.is_authenticated %}
    <h3>Add a Comment</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Comment</button>
    </form>
{% else %}
    <p>
        <a href="/login/">Login</a> to comment.
    </p>
{% endif %}

{% endblock %}
